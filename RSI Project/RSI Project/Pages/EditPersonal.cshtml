@page
@using RSI_Project.Classes
@model RSI_Project.Pages.EditPersonalModel
@{
    ViewData["Title"] = "Personal Information";

}



<div class="text-center">
    <h1>@ViewData["Title"]</h1>
    <p></p>
    <div class="row text-start justify-content-center" style="font-size:1.2em;">
        <div class="col-2">
            <p>Employee ID</p>
            <p>First Name</p>
            <p>Last Name</p>
            <p>Email</p>
            <p>Practice Area</p>
            <p>Skills</p>
        </div>
        <div class="col-4">
            <p>@Model.employee.employeeID</p>
            <form asp-page-handler="name" method="post">
                <p><input type="text" name="fName" value="@Model.employee.fName" /><button class="btn-light">Save</button></p>
                <p><input type="text" name="lName" value="@Model.employee.lName" /><button class="btn-light">Save</button></p>
                <input type="hidden" name="empId" value="@Model.employee.empIntID" />
            </form>
            <p>@Model.employee.email</p>
            <form id="practiceArea" asp-page-handler="area" method=post>
                <select name="practiceAreaId" onchange="this.form.submit()" style="width:70%;">
                    @foreach (PracticeArea practiceArea in Model.practiceAreas)
                    {
                        @if (Model.employee.practiceArea == practiceArea.practiceAreaID)
                        {
                            <option value="@practiceArea.practiceAreaID" selected>@practiceArea.practiceAreaName</option>
                        }
                        else
                        {
                            <option value="@practiceArea.practiceAreaID">@practiceArea.practiceAreaName</option>
                        }
                    }
                </select>
                <input type="hidden" name="empId" value="@Model.employee.empIntID" />
            </form>
            <br />
            <table class="table table-striped table-light">
                @foreach (var skill in Model.skills)
                {
                    <tr>
                        <td>@skill.skillName</td>
                        <!--this should NOT delete the record, rather set the skill as inactive-->
                        <td class="text-center">
                            <form asp-page-handler="remove" method="post">
                              <button class="btn btn-default" style="color:red;">Remove</button>
                                <input type="hidden" name="skillId" value="@skill.skillID" />
                                <input type="hidden" name="empId" value="@Model.employee.empIntID" />
                            </form>
                        </td>
                    </tr>
                }
            </table>
            <form id="personalSkills" asp-page-handler="add" method="post">
                <p>
                    <select name="skillId" style="width:70%;">
                        @foreach (var unasSkill in Model.unasSkills)
                        {
                            <option value="@unasSkill.skillID">@unasSkill.skillName</option>
                        }
                    </select>
                    <input type="hidden" name="empId" value="@Model.employee.empIntID" />
                    <button class="btn-light">Add</button>
                </p>
            </form>
        </div>
    </div>
</div>




